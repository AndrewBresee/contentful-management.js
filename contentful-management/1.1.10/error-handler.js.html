<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Contentful JS SDK: Source: error-handler.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

  <main>
    <div class="content">
      <div id="main">

          <h1 class="page-title">Source: error-handler.js</h1>

          



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _stringify = require('babel-runtime/core-js/json/stringify');

var _stringify2 = _interopRequireDefault(_stringify);

exports.default = errorHandler;

var _get = require('lodash/get');

var _get2 = _interopRequireDefault(_get);

function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { default: obj }; }

/**
 * Errors received from server requests
 * @memberof ContentfulClientAPI
 * @typedef ErrorResponse
 * @prop {string} name - Error name. Usually refers to the sys.id returned on the
 * error server response. If that's not available or is unknown, it defaults to
 * the HTTP error code and status text.
 * @prop {string} message - Stringified JSON object with request information,
 * HTTP response details and error details payload (if available). The `requestId`
 * property is internal to Contentful and it can be used when contacting support
 * about unusual errors.
 */

/**
 * Handles errors received from the server. Parses the error into a more useful
 * format, places it in an exception and throws it.
 * See https://www.contentful.com/developers/docs/references/content-management-api/#/introduction/errors
 * for more details on the data received on the errorResponse.data property
 * and the expected error codes.
 * @private
 * @param {Object} errorResponse - Error received from an axios request
 * @throws {ErrorResponse}
 */
function errorHandler(errorResponse) {
  var data = errorResponse.data;
  var status = errorResponse.status;
  var statusText = errorResponse.statusText;
  var config = errorResponse.config;

  var errorData = {
    request: {
      url: config.url,
      headers: config.headers,
      method: config.method,
      payloadData: config.data
    },
    status: status,
    statusText: statusText
  };
  if ((0, _get2.default)(data, 'sys.type') === 'Error') {
    errorData.message = data.message;
    errorData.requestId = data.requestId;
    if (data.details) {
      errorData.details = data.details;
    }
  }
  var error = new Error();
  var errorName = (0, _get2.default)(data, 'sys.id');
  error.name = errorName &amp;&amp; errorName !== 'Unknown' ? errorName : status + ' ' + statusText;
  error.message = (0, _stringify2.default)(errorData, null, '  ');
  throw error;
}</code></pre>
        </article>
    </section>




      </div>

      <nav>
          <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="ApiKey.html">ApiKey</a></li><li><a href="Asset.html">Asset</a></li><li><a href="ContentfulClientAPI.html">ContentfulClientAPI</a></li><li><a href="contentfulManagement.html">contentfulManagement</a></li><li><a href="ContentfulSpaceAPI.html">ContentfulSpaceAPI</a></li><li><a href="ContentType.html">ContentType</a></li><li><a href="EditorInterface.html">EditorInterface</a></li><li><a href="Entry.html">Entry</a></li><li><a href="EntryFields.html">EntryFields</a></li><li><a href="Meta.html">Meta</a></li><li><a href="Role.html">Role</a></li><li><a href="Space.html">Space</a></li><li><a href="SpaceMembership.html">SpaceMembership</a></li><li><a href="Webhook.html">Webhook</a></li></ul>
      </nav>
    </div>

    <footer>
        Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
         on Fri Jul 29 2016 14:31:36 GMT+0000 (UTC)
        for contentful.js 1.1.10
    </footer>
  </main>

  <script> prettyPrint(); </script>
  <script src="scripts/linenumber.js"> </script>
</body>
</html>
